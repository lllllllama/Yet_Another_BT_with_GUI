#ifndef BITFIELD_H
#define BITFIELD_H

typedef struct _Bitmap {
	unsigned char *bitfield;       // ????¦Ë?
	int           bitfield_length; // ¦Ë?????????????
	int           valid_length;    // ¦Ë???§¹????¦Ë??,??¦Ë???????piece
} Bitmap;

int  create_bitfield();                       // ????¦Ë?,??????›g???§Ô????
int  get_bit_value(Bitmap *bitmap,int index); // ?????¦Ë???
int  set_bit_value(Bitmap *bitmap,int index,
				   unsigned char value);      // ??????¦Ë???
int  all_zero(Bitmap *bitmap);                // ???????
int  all_set(Bitmap *bitmap);                 // ????????1
void release_memory_in_bitfield();            // ???bitfield.c?§Ø??????????
int  print_bitfield(Bitmap *bitmap);          // ???¦Ë??,???????

int  restore_bitmap(); // ??¦Ë??›¥???????
                       // ??????????,???????????????????????
int  is_interested(Bitmap *dst,Bitmap *src);  // ???¦Ë?src??peer???????
                                              // dst¦Ë???peer?????
int  get_download_piece_num(); // ?????????????????piece??

#endif
